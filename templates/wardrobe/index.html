{% extends "base.html" %}
{% block content %}

{% if msg %}<div class="flash">{{ msg }}</div>{% endif %}

<section class="panel">
  <h2>Add garment</h2>
  <form method="post">
    {% csrf_token %}
    <input type="hidden" name="action" value="add"/>
    <input name="name" placeholder="Silk Blouse" required>
    <select name="category">
      <option value="TOP">Top</option><option value="BOTTOM">Bottom</option>
      <option value="DRESS">Dress</option><option value="OUTERWEAR">Outerwear</option>
      <option value="SHOES">Shoes</option><option value="BAG">Bag</option>
    </select>
    <input name="color" placeholder="ivory" required>
    <select name="fit">
      <option>fitted</option><option>relaxed</option><option>oversized</option><option>tailored</option>
    </select>
    <label>Formality <input type="number" name="formality" min="1" max="5" value="3"></label>
    <label>Warmth <input type="number" name="warmth" min="1" max="5" value="2"></label>
    <label>Price <input type="number" step="0.01" name="price" value="0.00"></label>
    <input name="tags" placeholder="sneaker, suede">
    <button type="submit">Add</button>
  </form>
</section>

<section class="panel">
  <h2>Generate outfits</h2>
  <form method="post" class="row">
    {% csrf_token %}
    <input type="hidden" name="action" value="outfits"/>
    <select name="occasion">
      <option value="WORK" {% if occ == 'WORK' %}selected{% endif %}>Work</option>
      <option value="DATE" {% if occ == 'DATE' %}selected{% endif %}>Date</option>
      <option value="CASUAL" {% if occ == 'CASUAL' %}selected{% endif %}>Casual</option>
      <option value="EVENING" {% if occ == 'EVENING' %}selected{% endif %}>Evening</option>
      <option value="FORMAL" {% if occ == 'FORMAL' %}selected{% endif %}>Formal</option>
    </select>
    <button type="submit">Suggest Outfits âœ¨</button>
  </form>

  {% for o in outfits %}
    <div class="card">
      <div><strong>{{ o.notes }} â€¢ score {{ o.score }}</strong></div>
      <div class="pieces">
        {% for p in o.pieces %}<span>{{ p.name }} ({{ p.color }})</span>{% endfor %}
      </div>
    </div>
  {% empty %}
    <p class="muted">No outfits yet. Add a top, bottom and shoes (or a dress).</p>
  {% endfor %}
</section>

<section class="panel">
  <h2>Build capsule</h2>
  <form method="post">
    {% csrf_token %}
    <input type="hidden" name="action" value="capsule"/>
    <input type="hidden" name="occasion" value="{{ occ }}"/>
    <button type="submit">Suggest Capsule ðŸ§³</button>
  </form>
  {% if capsule %}
    <ul>
      {% for g in capsule %}<li>{{ g.name }} ({{ g.color }})</li>{% endfor %}
    </ul>
  {% endif %}
</section>

<section class="panel">
  <h2>Closet ({{ items|length }})</h2>
  <ul>
    {% for g in items %}<li>{{ g.name }} Â· {{ g.color }} Â· {{ g.category }}</li>{% endfor %}
  </ul>
</section>

{% endblock %}
